<!DOCTYPE html>
<html lang="en">
<head>
    <title>Milestone 1</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
    <div class = "home">
        <div class='container'>
           <div class='jumbotron text-center'>
             <h1>Thy Tweeter Project</h1>
           </div>
           <div class = "row">
               <div class="col-sm-12 text-center">
                   <h3>Log In</h3>
              <form >
               <label for="username">Username: </label>
                <input name="username" id = "lusername">
                <label for="password">Password: </label>
                <input name="password" type="password" id = "lpassword">
                <button type='submit' id="lsubmit">submit</button>
              </form>
              </div>
          </div>
          <br>
           <div class="row">
             <div class="col-sm-12 text-center">
                 <h3>Sign Up</h3>
               <form >
               <label for="name">Username: </label>
                <input name="name" id = "susername">
                <label for="name">Email: </label>
                <input name="email"  type="email" id = "semail">
                <label for="name">Password: </label>
                <input name="password" type="password" id = "spassword">
                <button type='submit' id="ssubmit">submit</button>
              </form>
       
            </div>
          </div>
          <br>
          <div class = "row">
              <div class="col-sm-12 text-center">
                  <h3>Verify</h3>
              <form>
               <label for="email">Email: </label>
                <input name="email" id="vemail">
                <label for="key">Key: </label>
                <input name="key" id="vkey" type="password">
                <button type='submit' id="vsubmit">submit</button>
              </form>
              </div>
          </div>
        </div>
        <br>
        <br>
        <div class = "row">
                <div class="col-sm-12 text-center">
            <button id ="search">Search Stuff</button>
        </div>
        </div>
     
        </div>
        
        <script>
            $(document).ready(() =>{
                $("#ssubmit").on("click",(event) =>{
                    event.preventDefault();
                    let newUser = {
                        username: $("#susername").val(),
                        email: $("#semail").val(),
                        password: $("#spassword").val()
                    };
                    $.post("/adduser", newUser).then((resp) =>{
                        console.log(resp)
                    });
                    
                });
                $("#vsubmit").on("click",(event) => {
                    event.preventDefault();
                    let user = {
                        email: $("#vemail").val(),
                        key: $("#vkey").val()
                    }
                    $.post("/verify", user).then((resp) =>{
                        console.log(resp);
                    });
                });
                $("#lsubmit").on("click",(event) => {
                    event.preventDefault();
                    let user = {
                        username: $("#lusername").val(),
                        password: $('#lpassword').val()
                    }
                    $.post("/login", user).then((resp) =>{
                        console.log(resp);
                        if(resp.status === "OK")
                          window.location.assign("/home");
                    });
                });

                $("#search").on("click",event=>{
                    window.location.assign("/home");
                })
            })
        </script>
</body>
</html>