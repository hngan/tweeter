<!DOCTYPE html>
<html lang="en">
<head>
    <title>Milestone 4</title>
	<!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
    
    <br>
    <br>
    <br>
    <div class="card" style = "width: 40%; float: left; margin-left: 5%; margin-right:10%">
        <h5 class="card-header">Tweet Something!</h5>
        <div class="card-body">
            <h5 class="card-title">Content</h5>
            <textarea id="content" cols="60" rows="3" placeholder="You can tweet anything!"></textarea>
            <h5 class="card-title">Media(Enter IDs with a space apart each):</h5>
            <input type="text" placeholder="" id="tmedia">
            <br>
            <h5 class="card-title" style="display: inline">Reply?</h5>
            <input type="checkbox"  id="treply">
            <h5 class="card-title" style="display: inline">Parent ID</h5>
            <input type="text"  id="tparent">
            <h5 class="card-title">Returned ID:<span id="itemId"></span></h5>
          <a class="btn btn-primary" id="contentSubmit" style="color: white;">Submit Tweet!</a>
        </div>
      </div>

      
      <br>

     

      <br>

      

      <div class="card" style = "width: 40%; float: left; margin-left: 5%; margin-right:10%">
        <h5 class="card-header">Retweet!</h5>
        <div class="card-body">
            <h5 class="card-title">Parent Id:</h5>
            <input type="text" placeholder="Parent" id="retweet">
            <h5 class="card-title">Media(Enter IDs with a space apart each):</h5>
            <input type="text" id="rmedia">
            <h5 class="card-title">Retweet Id:<span id="retweetId"></span></h5>
          <a class="btn btn-primary" id="reSubmit" style="color: white;">Submit!</a>
        </div>
      </div>

      <form method="POST" action="/addmedia" enctype="multipart/form-data">
        <div class="card" style = "width: 40%; float: left; margin-left: 5%; margin-right:10%">   
          <h5 class="card-header">Upload a File!</h5>
          <div class="card-body">  
        <input type="file" name="document" />
        <input type="submit" />
        <h5 class="card-title">Returned ID:<span id="smediaId"></span></h5>
      </div>
      </div>
      </form>

      <br>

<script>
$(document).ready(function(){

    $("#contentSubmit").on("click",(event)=>{
        let content =  $("#content").val();
        let item = {
            content:content
        }
        if(document.getElementById("treply").checked){
          item.childType = "reply"
          item.parent = $("#tparent").val()}
        if($("#tmedia").val() !== ""){
          item.media = $("#tmedia").val().split(" ")
        }
        $.post('/additem', item).then((resp)=>{
            $("#itemId").text(resp.id);
        });
    });

   
    
    
    
})
        </script>
</body>
</html>